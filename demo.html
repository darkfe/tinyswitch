<!doctype html>
<html lang="en">
    
    <head>
        <meta charset="UTF-8">
        <title>
            tinyswitch demo
        </title>
       <script src="http://libs.baidu.com/jquery/1.9.0/jquery.js"></script> 
        <xscript src="http://libs.baidu.com/bootstrap/2.0.4/js/bootstrap.min.js">
        </xscript>
        <link href="http://libs.baidu.com/bootstrap/2.0.4/css/bootstrap.min.css"
        rel="stylesheet">
        <script src="tinyswitch.js">
        </script>
        <link rel="stylesheet" href="http://softwaremaniacs.org/media/soft/highlight/styles/monokai.css">
        <style>
            h2{
                margin-top:20px;
            }
            .demo-actions .source{
                margin-top:10px;
            }
        </style>
    </head>
    
    <body>
        <a href="https://github.com/darkfe/tinyswitch"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"></a>
    	<div class="container"> 



<h2>单选框</h2>
<div class="demo"> 
<div class="form-inline" data-tsrule="@R value!=111 ? disabled : enabled&focus #A">
    <label><input checked type="radio" name="R" >一年</label>
    <label><input type="radio" name="R" >半年</label>
    <label><input type="radio" name="R" value="111">自定义</label>
    <label><input type="text"  id="A"  ></label>  
</div>
</div> 

<div class="demo-actions">
    <button class="btn">查看源码</button>
    <pre class="source" style="display:none"></pre>
</div>

<h2>单复选框</h2>
<div class="demo">
<div >
    <label><input type="checkbox" data-tsrule="checked ? enabled&focusText : disabled #C" value="2">启用发送到邮箱功能</label>  
</div>
<div id="C">
    <form class="form-inline"> 
    邮箱: <input type="text"><input type="button" class="btn" value="保存">
    </form>
</div> 
<script>
    $.tinyswitch.action({'focusText' : function(ele){
        $(ele).find(':text:eq(0)').focus();
    }})
</script>
</div>
<div class="demo-actions">
    <button class="btn">查看源码</button>
    <pre class="source" style="display:none"></pre>
</div> 

<h2>多复选框 - 多个条件</h2>
<div class="demo">
<div  data-tsrule="@mv value==1&2 ? show : hide #MV"  >
    只有选中 北京和上海 才会触发
    <label><input type="checkbox" name="mv" value="1">北京</label>  
    <label><input type="checkbox" name="mv" value="2">上海</label>  
    <label><input type="checkbox" name="mv" value="3">广州</label>  
</div>
<div id="MV">
    我出现了,厉害吧
</div> 
<script>
    $.tinyswitch.action({'focusText' : function(ele){
        $(ele).find(':text:eq(0)').focus();
    }})
</script>
</div>
<div class="demo-actions">
    <button class="btn">查看源码</button>
    <pre class="source" style="display:none"></pre>
</div> 

<h2>单选下拉列表 </h2>
<div class="demo"> 
    <select data-tsrule="value=='上海' ? show : hide #D">
        <option value="北京">北京</option>
        <option value="上海">上海</option>
        <option value="广州">广州</option>
    </select>

    <div id="D">
        非常抱歉由于银行系统升级,上海地区暂时无法入账.
    </div> 
</div>

<h2>多选下拉列表 </h2>
<div class="demo"> 
     只有选中 北京和上海 才会触发<br>
    <select multiple data-tsrule="value='上海'&'北京' ? show : hide #V">
        <option value="北京">北京</option>
        <option value="上海">上海</option>
        <option value="广州">广州</option>
    </select>

    <div id="V">
        我又出现了,厉害吧
    </div> 
</div>

<h2>下拉列表单个的option绑定规则 </h2>
<div class="demo"> 
     只有选中 上海 才会触发<br>
    <select>
        <option value="北京"  data-tsrule="selected ? hide #J">北京</option>
        <option value="上海"  data-tsrule="selected ? show #J">上海</option>
        <option value="广州"  data-tsrule="selected ? hide #J">广州</option>
    </select>

    <div id="J">
        我又出现了,厉害吧
    </div> 
</div>



<div class="demo-actions">
    <button class="btn">查看源码</button>
    <pre class="source" style="display:none"></pre>
</div>

<h2>相对控件定位目标</h2>
<div class="demo">
<div>
   <div class="form-inline" data-tsrule="@S value!=1 ? show&focusText : hide parent.parent.next~.detail">
        <label>是否有过被骗的经历?</label>
        <label><input checked type="radio" name="S">是的</label>
        <label><input type="radio" checked name="S" value="1">没有</label>
    </div>
    <div class="detail">
        请填写受骗的详细经过: <input type="text" name="" id="">
    </div>
 
    
    <div class="form-inline" data-tsrule="@M value!=0 ? show : hide parent.parent.next~.detail">
        <label>是否有过传销的经历?</label>
        <label><input checked type="radio" name="M">是的</label>
        <label><input type="radio" checked name="M" value="0">没有</label> 
    </div>
    <div class="detail">
        
        你干过什么传销?
        <div class="form-inline" data-tsrule="@C value==1 ? enabled&focus : disabled #P">
            <label><input checked type="radio" name="C">安利</label>
            <label><input type="radio" name="C">完美</label>
            <label><input type="radio" name="C">雅芳</label>
            <label><input type="radio" name="C" value="1">其他</label>
            <label><input type="text" name="P" id="P"></label>
        </div> 
    </div>
</div>
</div>

<div class="demo-actions">
    <button class="btn">查看源码</button>
    <pre class="source" style="display:none"></pre>
</div>


<h2>多组规则</h2>
<div class="demo"> 
<div class="form-inline" data-tsrule="@G value==1 ? hide : show h2:not(:last); value==1 ? hide : show .demo:not(:last); value==1 ? hide : show .demo-actions:not(:last)">
    <label><input  type="radio" name="G" value="1">把其他的例子都隐藏掉</label>
    <label><input checked type="radio" name="G">显示其他的例子</label> 
</div>
</div>
<div class="demo-actions">
    <button class="btn">查看源码</button>
    <pre class="source" style="display:none"></pre>
</div>

            <script>
                $(document).on('click', '.demo-actions .btn',function(){
                    var code = $(this).next();
                    if(code.is(':has(code)')){
                        code.toggle();
                        return;
                    }
                    var source = $(this).parent().prev().html().replace(/</g,'&lt;').replace(/^.*$/m,'');
                    $(this).next().html('<code>' + source + '</code>');
                    hljs.highlightBlock($(this).next().show()[0]);
                })
            </script>
 
            <script src="http://softwaremaniacs.org/media/soft/highlight/highlight.pack.js"></script>
            <script>
            hljs.tabReplace = '';
            hljs.initHighlightingOnLoad();
            </script>
        </div>
    </body>
</html>